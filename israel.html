// Contact.java
package com.example.contacts;

public class Contact {
    private Long id;
    private String name;
    private String phoneNumber;
    private String email;

    public Contact() {}

    public Contact(Long id, String name, String phoneNumber, String email) {
        this.id = id;
        this.name = name;
        this.phoneNumber = phoneNumber;
        this.email = email;
    }

    // Getters and setters
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    public String getPhoneNumber() { return phoneNumber; }
    public void setPhoneNumber(String phoneNumber) { this.phoneNumber = phoneNumber; }
    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
}

// ContactController.java
package com.example.contacts;

import org.springframework.web.bind.annotation.*;
import java.util.ArrayList;
import java.util.List;

@RestController
@RequestMapping("/api/contacts")
@CrossOrigin(origins = "*")
public class ContactController {
    private List<Contact> contacts = new ArrayList<>();
    private Long nextId = 1L;

    @GetMapping
    public List<Contact> getAllContacts() {
        return contacts;
    }

    @PostMapping
    public Contact addContact(@RequestBody Contact contact) {
        contact.setId(nextId++);
        contacts.add(contact);
        return contact;
    }

    @DeleteMapping("/{id}")
    public void deleteContact(@PathVariable Long id) {
        contacts.removeIf(contact -> contact.getId().equals(id));
    }

    @PutMapping("/{id}")
    public Contact updateContact(@PathVariable Long id, @RequestBody Contact updatedContact) {
        for (int i = 0; i < contacts.size(); i++) {
            if (contacts.get(i).getId().equals(id)) {
                updatedContact.setId(id);
                contacts.set(i, updatedContact);
                return updatedContact;
            }
        }
        return null;
    }
}

// index.html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Management System</title>
    <style>
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .form-container {
            margin-bottom: 30px;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
        }
        input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Contact Management System</h1>
        <div class="form-container">
            <h2>Add/Edit Contact</h2>
            <form id="contactForm">
                <input type="hidden" id="contactId" />
                <label for="name">Name:</label>
                <input type="text" id="name" required />
                <label for="phone">Phone:</label>
                <input type="text" id="phone" required />
                <label for="email">Email:</label>
                <input type="email" id="email" required />
                <button type="submit">Add Contact</button>
            </form>
        </div>
        <div class="contact-list-container">
            <h2>Contact List</h2>
            <table id="contactList">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Phone</th>
                        <th>Email</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    <script>
        const API_URL = 'http://localhost:8080/api/contacts';
        let editingId = null;

        // Load contacts on page load
        document.addEventListener('DOMContentLoaded', loadContacts);

        // Form submission handler
        document.getElementById('contactForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const contact = {
                name: document.getElementById('name').value,
                phoneNumber: document.getElementById('phone').value,
                email: document.getElementById('email').value
            };

            if (editingId) {
                await updateContact(editingId, contact);
            } else {
                await addContact(contact);
            }

            document.getElementById('contactForm').reset();
            editingId = null;
            document.querySelector('button[type="submit"]').textContent = 'Add Contact';
            await loadContacts();
        });

        async function loadContacts() {
            try {
                const response = await fetch(API_URL);
                const contacts = await response.json();
                const tbody = document.querySelector('#contactList tbody');
                tbody.innerHTML = '';

                contacts.forEach(contact => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${contact.name}</td>
                        <td>${contact.phoneNumber}</td>
                        <td>${contact.email}</td>
                        <td class="action-buttons">
                            <button onclick="editContact(${contact.id})">Edit</button>
                            <button onclick="deleteContact(${contact.id})">Delete</button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                });
            } catch (error) {
                console.error('Error loading contacts:', error);
            }
        }

        async function addContact(contact) {
            try {
                await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(contact),
                });
            } catch (error) {
                console.error('Error adding contact:', error);
            }
        }

        async function deleteContact(id) {
            if (confirm('Are you sure you want to delete this contact?')) {
                try {
                    await fetch(`${API_URL}/${id}`, {
                        method: 'DELETE',
                    });
                    await loadContacts();
                } catch (error) {
                    console.error('Error deleting contact:', error);
                }
            }
        }

        async function editContact(id) {
            try {
                const response = await fetch(`${API_URL}`);
                const contacts = await response.json();
                const contact = contacts.find(c => c.id === id);
                
                if (contact) {
                    document.getElementById('name').value = contact.name;
                    document.getElementById('phone').value = contact.phoneNumber;
                    document.getElementById('email').value = contact.email;
                    editingId = contact.id;
                    document.querySelector('button[type="submit"]').textContent = 'Update Contact';
                }
            } catch (error) {
                console.error('Error loading contact for edit:', error);
            }
        }

        async function updateContact(id, contact) {
            try {
                await fetch(`${API_URL}/${id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(contact),
                });
            } catch (error) {
                console.error('Error updating contact:', error);
            }
        }
    </script>
</body>
</html>

// pom.xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.7.0</version>
    </parent>
    <groupId>com.example</groupId>
    <artifactId>contacts</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>contacts</name>
    <description>Contact Management System</description>
    <properties>
        <java.version>11</java.version>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project>
